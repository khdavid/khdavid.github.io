<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<html>

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link rel="stylesheet" type="text/css" href="../main.css">
<body  text="#000000" bgcolor="#FFFFFF" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0" marginwidth="0" marginheight="0">


  <table>
<tr>
<td width=15%>
</td>
<td width=600px>
<div  style="text-align: left;"align="left">
<h1>Введение</h1>
Перед прочтением теории рекомендую ознакомиться с моей статьей на хабре, где я описываю многие интересные детали, подводные камни и историю создания программы: 
<a href="http://habrahabr.ru/post/161301/">http://habrahabr.ru/post/161301/</a>.
<div>
А тут объясняется, как работает <a href="../linkage">программа</a>, и дается доказательство модифицированной теоремы Кемпе.
Доказательство того, что для любой косинусиодальной тригонометрической кривой существует шарнирный механизм,
который умеет ее рисовать. Оригинальная теорема Кемпе была доказана для алгебраических кривых, ее доказательство можно прочитать,
к примеру, <a href="http://home.iitk.ac.in/~anupams/me352a_2015_course_folder/Kempe_AS.pdf">тут</a>.
</div>
<h1>Алгоритм</h1>

Итак наша программа работает следующим образом. Пользователь рисуют любую кривую. Программа запоминает кривую в виде функций $x(t)$ и $y(t)$, $t\in [0..\pi]$.
Далее, функции $x(t)$ и $y(t)$ с заданной точностью аппроксимируются конечными тригонометрическими рядами (косинусоидальными). Для точности аппроксимации $n$:
<p>$\displaystyle x(t)\approx x_{app}(t)=\frac{a_0}{2}+a_1\cos t+a_2\cos 2t+...+a_n\cos nt$</p>
<p>$\displaystyle y(t)\approx y_{app}(t)=\frac{b_0}{2}+b_1\cos t+b_2\cos 2t+...+b_n\cos nt$</p>
Коэффициенты  $a_k$ и $b_k$ легко находятся. Нужно просто умножить равенства слева и справа на $\cos(kt)$ и проинтегрировать от $0$ до $\pi$, тогда в правой
части почти все интегралы обнулятся, кроме одного при члене $a_k$ в первом выражении и при $b_k$ во втором выражении. В итоге получится:
<p>$\displaystyle a_k=\frac{2}{\pi}\int\limits_0^\pi x(t)\cos(kt)dt,\quad b_k=\frac{2}{\pi}\int\limits_0^\pi x(t)\cos(kt)dt$</p>
Теперь остается для тригонометрической кривой построить шарнирный механизм, который ее рисует.
Предварительно мы познакомимся с основными строительными блоками нашего будущего механизма. Почти все они предложены
 в оригинальном доказательстве Кемпе.
<h4>Механизм Липкина-Посселье</h4>
<div>
<img width=220px src="pic/Lipkin_Peaucellier_2.png">
</div>
В этом механизме все палочки одинакового цвета имеют одинаковую длину. Доказать, что
механизм действительно рисует прямую можно прямыми выкладками, как говориться, в лоб.
Но люди, знакомые с
<a href="http://ru.wikipedia.org/wiki/%D0%98%D0%BD%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F_(%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F)">
преобразованием инверсии</a> могут увидеть довольно четкую логику в
<a target="_blank" href="http://en.wikipedia.org/wiki/Peaucellier%E2%80%93Lipkin_linkage#Mathematical_proof_of_concept">доказательстве</a>.

<h4>Параллелограмм и антипараллелограмм</h4>
<img height=250px src="pic/parAndContPar.png">
<div>
Очень важные элементы, которые будет использоваться при построении шарнира - это параллелограмм и антипараллелограмм.
 Антипараллелограмм - это
вывернутый наизнанку параллелограмм.
</div>
<h4>Удвоитель угла</h4>
<img height=250px src="pic/doubleAngle.png">
<div>
Если взять красненький антипараллелограмм, и к нему прикрепить подобный ему маленький синий антипараллелограмм,
как показано на рисунке,
то из-за того что обе фигуры подобны, соответственные углы будут, обозначенные через $\alpha$, будут всегда равны.
В получившемся шарнирном механизме можно свободно изменять как угодно угол $\alpha$ и второй угол будет всегда ему равен.
Таким образом мы построили удвоитель угла $\alpha$.
</div>
<h4>Утроитель угла</h4>
<img height=250px src="pic/tripleAngle.png">
<div>
Если к предыдущему удвоителю угла прикрепить еще более маленький зеленый антипараллелограмм, подобный красненькому и синенькому,
то получится утроитель угла $\alpha$. Подобным способом можно строить шарнирные механизмы,
которые учетверяют углы, упятеряют, ушестеряют и т.д.
</div>
<h4>Транслятор</h4>
<img width=220px src="pic/translator.png">
<div>
Эта конструкция из двух параллелограммов позволяет переносить отрезок $a$ параллельно самому себе.
Если вы помните, то в некоторых настольных лампах как-раз такой шарнирный механизм и
обеспечивает поступательное движение лампы (параллельно самой себе).
</div>
<h4>Транслятор вдоль определенной прямой</h4>
<img width=550px src="pic/transOverLine.png">
<div>
Иногда бывает нужным какой-нибудь отрезок $CD$ двигать параллельно самому себе, но так, чтобы его начальная точка
$C$ всегда лежала на определенной прямой. Для этого, как показано на рисунке, нужно
при помощи транслятора соединить отрезок $CD$,
с любым параллельным и равным ему закрепленным отрезком $AB$ (точка $A$ лежит на прямой).
Транслятор будет обеспечивать параллельное самому себе движение отрезка $CD$, но чтобы ограничить движение точки $C$
вдоль прямой, нужно соединить ее с концом шарнира Липкина-Посселье, рисующим эту прямую.
</div>
<div>
Вот мы и познакомились со всеми строительными блоками нашего будущего механизма.
 Но перед тем как переходить к построению нашего шарнира, следует остановиться на очень важном и интересном
 исторически важном моменте, связанным с параллелограммным и антиапараллелограммным шарнирами.
Дело в том, что Кемпе в своем доказательстве не учел, что при движении они могут переходить друг в друга,
проходя критический момент (когда все палочки лежат на одной прямой).
Параллелограмм может вывернуться наизнанку в антипараллелограмм.
Эта маленькая дыра в доказательстве Кемпе делала его доказательство, строго говоря,
неверным и была залатана совершенно недавно в 2008 году в
<a href="http://web.mit.edu/tabbott/www/papers/mthesis.pdf">дипломной работе</a>
студента MIT <a href="http://web.mit.edu/tabbott/www/">Тимоти Абботта</a>.
Чтобы параллелограмм не выворачивался бы в антипараллелограмм, а  антипараллелограмм - в параллелограмм,
Абботт предложил специальную надстройку над ними, такую, что она не
мешает движению, но и не дает шарниру вывернуться наизнанку:
</div>

<img height=250px src="pic/abbottBracing.png">
<div>
Для параллелограмма эта надстройка довольно очевидна: нужно прикрепить параллельную боковой стороне палочку.
А для антипараллелограмма надстройка не такая очевидная.
На правой картинке точки $P,Q,R$ и $S$ - середины соответствующих сторон, а точка $O$ выбрана таким образом, чтобы
показанные на рисунке красные отрезки были бы соответственно равны: $OP=OS$ и $OQ=OR$.
В моей программе я использую именно эти шарниры с надстройками, но в изложении
доказательства я не буду рисовать эти красные надстройки, чтобы не загромождать рисунки.
</div>
<h2>Построение шарнира</h2>
Итак мы наконец переходим к заключительной части нашего построения. Все предварительные заготовки уже изучены,
и теперь мы готовы  для любой тригонометрической кривой вида
<p>$x(t)=a_0+a_1\cos t+a_2\cos 2t+...+a_n\cos nt$</p>
<p>$y(t)=b_0+b_1\cos t+b_2\cos 2t+...+b_n\cos nt$</p>
строить шарнирный механизм, рисующий ее. Мы построим такой механизм для конкретного примера (купол):
<img width= 400 px src="pic/path.png">
<div>
Идея построения довольно простая. Сначала мы без труда построим механизм, который рисует кривую так, что проекция
рисующей точки на ось $x$ равна
$x(t)=\cos t-\cos(3t)$. Потом мы аналогично построим такой же механизм, у которой проекция рисующей точки на ось $y$ равна
$y(t)=\cos 2t$. Потом мы эти механизмы соединим друг с другом таким образом, что они вместе будут рисовать нашу искомую кривую.
</div>
<div>
Начнем с первой функции $x(t)=\cos(t)-\cos(3t)$.
Построим для произвольного угла $t$ уже нам хорошо известный утроитель угла. Как мы уже знаем, он состоит из трех скрепленных между собой
подобных антипараллелограммов. Не забываем закрепить наш шарнир в точках $0$ и $1$:
</div>
<img width=550px src="pic/constr1.png">
<div>
Теперь на этом утроителе угла построим два серых отрезка $0A$ и $0B$, так чтобы их длина равнялась бы $1$.
Отрезок $0A$ образует угол $t$ c осью $x$, а отрезок $0B$ - угол $-3t+\pi$, поэтому проекция точки $A$ на ось $x$ имеет
длину $\cos(t)$, а проекция точки $B$ - длину $-\cos(3t)$.
</div>
<img width=550px src="pic/constr2.png">
<div>
При помощи сиреневого транслятора перенесем отрезок $0B$ параллельно самому себе
так, чтобы его начало совпадало с точкой $A$. Получится отрезок $AC$,
параллельный и равный по длине отрезку $0B$. Проекция точки $C$ на ось $x$
будет равна нашей функции $x(t)=\cos(t)-\cos(3t)$
</div>
<img width=550px src="pic/constr3.png">
<div>
Теперь совершенно аналогично для функции $y(t)=\cos(2t)$ мы строим шарнирный механизм такой, что проекция
точки $E$ на ось $y$ равна $y(t)=\cos(2t)$
</div>
<img width=550px src="pic/constr4.png">
<div>
Итак, у нас есть два шарнирных механизма. У первого при изменении угла $t$ проекция точки $C$
на горизонтальную ось $x$ равна $x(t)=\cos(t)-\cos(3t)$, а у второго - проекция точки $E$ на вертикальную ось $y$
равна $y(t)=\cos(2t)$. Проблема в том, что пока эти два шарнира совершенно независимы, поэтому где-то в отдельном
месте нужно построить соединяющий их "двигатель" - прямоугольный синенький треугольник, который будет крутиться:
</div>
<img width=250px src="pic/driver.png">
<div>
Первый (горизонтальный) угол $t$ "двигателя"  при помощи <b>транслятора вдоль вертикально прямой $0y$</b>
соединим с углом $\angle A0D=t$ первого шарнира, а второй (вертикальный) угол $t$ "двигателя" при помощи <b>транслятора вдоль горизонтальной прямой $0x$</b>
соединим с углом $\angle G0F=t$. Получится, что первый шарнир как одно целое можно сдвигать вдоль вертикально оси $0y$
(при этом проекция точки $C$ горизонтальную ось $0x$ всегда будет $x(t)=\cos(t)-\cos(3t)$),
а второй шарнир к одно целое можно сдвигать вдоль горизонтальной оси $0x$
(при этом проекция точки $E$ на вертикальную ось $0y$ всегда будет $y(t)=\cos(2t)$). Нам остается просто свести
и соединить точки $C$ и $E$. У склеенной точки будет координата $x(t)=\cos(t)-\cos(3t),\quad y(t)=\cos(2t)$, то есть она
и будет рисовать нашу искомую кривую (купол). В итоге вот какой шарнирный механизм получится:
</div>
  <img width=100% src="pic/constr5.png">
<div>
Картинка очень запутанная, но, как говорится, какой шарнир, такой и рисунок.
<pre>


</pre>
</div>
  </div>
</td>
<td>
</td>
</tr>
</table>
</html>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27665935-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
